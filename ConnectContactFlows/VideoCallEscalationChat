{"modules":[{"id":"7e586f93-f7f3-40a9-abdc-3f53f067d9f4","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"2db78269-2720-41b1-8928-5a5684d7788f"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":145,"y":11}}},{"id":"2badefc0-ae32-4707-9080-59bdc0fd2ae3","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2419,"y":462}}},{"id":"b9362d6b-eb16-42c9-8184-256617a71588","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"2badefc0-ae32-4707-9080-59bdc0fd2ae3"},{"condition":"Error","transition":"a4859059-9dcb-4c5b-9b28-21f423938953"}],"parameters":[],"metadata":{"position":{"x":2174,"y":174},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"4c6a88e1-ecdb-406e-b19a-8e89b0cc0c59","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"b9362d6b-eb16-42c9-8184-256617a71588"},{"condition":"Error","transition":"a4859059-9dcb-4c5b-9b28-21f423938953"}],"parameters":[],"metadata":{"position":{"x":1918,"y":31},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"dcd85da1-b5c5-47d9-bb50-e7da4d3a1a55","type":"SetQueue","branches":[{"condition":"Success","transition":"4c6a88e1-ecdb-406e-b19a-8e89b0cc0c59"},{"condition":"Error","transition":"a4859059-9dcb-4c5b-9b28-21f423938953"}],"parameters":[{"name":"Agent","value":"videoRouteToAgent","namespace":"User Defined","resourceName":null}],"metadata":{"position":{"x":1670,"y":30},"useDynamic":true,"queue":"videoRouteToAgent"}},{"id":"a4859059-9dcb-4c5b-9b28-21f423938953","type":"PlayPrompt","branches":[{"condition":"Success","transition":"2badefc0-ae32-4707-9080-59bdc0fd2ae3"}],"parameters":[{"name":"Text","value":"We are experiencing technical difficulties, please try again later!","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1693,"y":415},"useDynamic":false}},{"id":"21375d66-4ec5-4153-98dd-b5ab0ea7efbd","type":"SetEventHook","branches":[{"condition":"Success","transition":"dcd85da1-b5c5-47d9-bb50-e7da4d3a1a55"},{"condition":"Error","transition":"a4859059-9dcb-4c5b-9b28-21f423938953"}],"parameters":[{"name":"Type","value":"CustomerQueue"},{"name":"ContactFlowId","value":"arn:aws:connect:eu-west-2:664998292936:instance/9388be3b-8acb-4632-9d66-3fcb8ff191ed/contact-flow/6beacfe7-1afd-4b44-bf07-0e3ee4ef42ce","resourceName":"VideoCallEscalationQueue"}],"metadata":{"position":{"x":1439,"y":130},"contactFlow":{"id":"arn:aws:connect:eu-west-2:664998292936:instance/9388be3b-8acb-4632-9d66-3fcb8ff191ed/contact-flow/6beacfe7-1afd-4b44-bf07-0e3ee4ef42ce","text":"VideoCallEscalationQueue"},"customerOrAgent":true,"useDynamic":false}},{"id":"b9814cc8-9e58-4563-90f1-09034b212b1f","type":"PlayPrompt","branches":[{"condition":"Success","transition":"0f8c989e-52a7-4691-b71f-6d6a935e26d2"}],"parameters":[{"name":"Text","value":"Your Reference has been validated, we are connecting you to your agent.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":912,"y":153},"useDynamic":false}},{"id":"0f8c989e-52a7-4691-b71f-6d6a935e26d2","type":"UpdateRoutingPriority","branches":[{"condition":"Success","transition":"21375d66-4ec5-4153-98dd-b5ab0ea7efbd"}],"parameters":[{"name":"AbsolutePosition","value":1}],"metadata":{"position":{"x":1155,"y":145},"adjustUnit":null}},{"id":"6b777b7d-1315-4b0c-b70b-2f3bd45be5ca","type":"PlayPrompt","branches":[{"condition":"Success","transition":"a9877127-6ba5-404a-a2a4-cf03b7f514f8"}],"parameters":[{"name":"Text","value":"Unfortunately, the Reference you have provided is not valid, or has already expired. Please check your reference and try again.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":913,"y":3},"useDynamic":false}},{"id":"a9877127-6ba5-404a-a2a4-cf03b7f514f8","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1158,"y":20}}},{"id":"586b5b40-13d1-490d-b5c0-ed44a1f86da0","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"error","transition":"6b777b7d-1315-4b0c-b70b-2f3bd45be5ca"},{"condition":"Evaluate","conditionType":"GreaterThanOrEqualTo","conditionValue":"0","transition":"b9814cc8-9e58-4563-90f1-09034b212b1f"},{"condition":"NoMatch","transition":"21375d66-4ec5-4153-98dd-b5ab0ea7efbd"}],"parameters":[{"name":"Attribute","value":"videoReferenceId"},{"name":"Namespace","value":"User Defined"}],"metadata":{"position":{"x":618,"y":43},"conditionMetadata":[{"operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"error","id":"94d9aed9-2e37-4ea8-8dee-fec4b24145e0"},{"operator":{"name":"Is greater or equal","value":"GreaterThanOrEqualTo","shortDisplay":">="},"value":"0","id":"05dc0a0b-8251-4f98-a4a2-223a5409d9f7"}]}},{"id":"2db78269-2720-41b1-8928-5a5684d7788f","type":"PlayPrompt","branches":[{"condition":"Success","transition":"6ba457d6-a2d4-4c7a-bab3-1d872e62df70"}],"parameters":[{"name":"Text","value":"Hi, $.Attributes.customerName! Welcome to AWS Video Contact Center","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":375,"y":13},"useDynamic":false}},{"id":"6ba457d6-a2d4-4c7a-bab3-1d872e62df70","type":"SetAttributes","branches":[{"condition":"Success","transition":"586b5b40-13d1-490d-b5c0-ed44a1f86da0"},{"condition":"Error","transition":"586b5b40-13d1-490d-b5c0-ed44a1f86da0"}],"parameters":[{"name":"Attribute","value":"false","key":"videoRecordingAutoStartEnabled","namespace":null},{"name":"Attribute","value":"false","key":"videoRecordingStartStopEnabled","namespace":null}],"metadata":{"position":{"x":372,"y":227}}}],"version":"1","type":"contactFlow","start":"7e586f93-f7f3-40a9-abdc-3f53f067d9f4","metadata":{"entryPointPosition":{"x":15,"y":15},"snapToGrid":false,"name":"VideoCallEscalationChat","description":"VideoCallEscalation main flow","type":"contactFlow","status":"published","hash":"9b9444e763846bec946976b22e5e18b647caae7d490e0963d06a2c6a0556027e"}}